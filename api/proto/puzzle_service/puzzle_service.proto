syntax = "proto3";
package game_service;
option go_package = "github.com/domino14/liwords/rpc/api/proto/puzzle_service";

import "macondo/api/proto/macondo/macondo.proto";

message RandomUnansweredPuzzleIdRequest {}

message RandomUnansweredPuzzleIdResponse { string puzzle_id = 1; }

message PuzzleRequest { string puzzle_id = 1; }

message PuzzleResponse {
  macondo.GameHistory history = 1;
  string before_text = 2;
  int32 attempts = 3;
}

message SubmissionRequest {
  string puzzle_id = 1;
  macondo.GameEvent answer = 2;
  bool show_solution = 3;
}

message SubmissionResponse {
  bool user_is_correct = 1;
  macondo.GameEvent correct_answer = 2;
  string game_id = 3;
  string after_text = 4;
  int32 attempts = 5;
}

message PuzzleVoteRequest {
  string puzzle_id = 1;
  int32 vote = 2;
}

message PuzzleVoteResponse {}

service PuzzleService {
  rpc GetRandomUnansweredPuzzleIdForUser(RandomUnansweredPuzzleIdRequest) returns(RandomUnansweredPuzzleIdResponse);
  rpc GetPuzzle(PuzzleRequest) returns(PuzzleResponse);
  rpc SubmitAnswer(SubmissionRequest) returns(SubmissionResponse);
  rpc SetPuzzleVote(PuzzleVoteRequest) returns(PuzzleVoteResponse);
}